<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="525px" preserveAspectRatio="none" style="width:1054px;height:525px;" version="1.1" viewBox="0 0 1054 525" width="1054px" zoomAndPan="magnify"><defs><filter height="300%" id="fxo5nnk8aig8r" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#fxo5nnk8aig8r)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="302" x="668.5" y="55.2969"/><rect fill="#FFFFFF" filter="url(#fxo5nnk8aig8r)" height="323.2656" style="stroke: #000000; stroke-width: 2.0;" width="1029.5" x="13" y="144.6953"/><rect fill="#FFFFFF" height="131.3359" style="stroke: none; stroke-width: 1.0;" width="1029.5" x="13" y="336.625"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="53" x2="53" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="289.5" x2="289.5" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="467.5" x2="467.5" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="598.5" x2="598.5" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="776.5" x2="776.5" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="922.5" x2="922.5" y1="38.2969" y2="484.9609"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1001.5" x2="1001.5" y1="38.2969" y2="484.9609"/><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="23" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="30" y="22.9951">RCOM</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="57" x="23" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="43" x="30" y="503.9561">RCOM</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="171.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="218" x="178.5" y="22.9951">Core 1 (RS485 Communication)</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="232" x="171.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="218" x="178.5" y="503.9561">Core 1 (RS485 Communication)</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="417.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="424.5" y="22.9951">Data Queue</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="417.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="83" x="424.5" y="503.9561">Data Queue</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="528.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="535.5" y="22.9951">Command Queue</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="136" x="528.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="122" x="535.5" y="503.9561">Command Queue</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="678.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="685.5" y="22.9951">Core 2 (Sensor/Actuation)</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="193" x="678.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="179" x="685.5" y="503.9561">Core 2 (Sensor/Actuation)</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="885.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="892.5" y="22.9951">Sensors</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="71" x="885.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="57" x="892.5" y="503.9561">Sensors</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="970.5" y="3"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="977.5" y="22.9951">Valves</text><rect fill="#FEFECE" filter="url(#fxo5nnk8aig8r)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="58" x="970.5" y="483.9609"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="44" x="977.5" y="503.9561">Valves</text><path d="M668.5,55.2969 L745.5,55.2969 L745.5,62.2969 L735.5,72.2969 L668.5,72.2969 L668.5,55.2969 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="302" x="668.5" y="55.2969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="683.5" y="68.3638">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="760.5" y="67.5073">[Continuously read sensors]</text><polygon fill="#A80036" points="911,89.5625,921,93.5625,911,97.5625,915,93.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="777" x2="917" y1="93.5625" y2="93.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="112" x="784" y="88.4966">Read sensor data</text><polygon fill="#A80036" points="788,118.6953,778,122.6953,788,126.6953,784,122.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="782" x2="922" y1="122.6953" y2="122.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="794" y="117.6294">Sensor data</text><path d="M13,144.6953 L77,144.6953 L77,151.6953 L67,161.6953 L13,161.6953 L13,144.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="323.2656" style="stroke: #000000; stroke-width: 2.0;" width="1029.5" x="13" y="144.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="157.7622">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="92" y="156.9058">[Status Command]</text><polygon fill="#A80036" points="277.5,178.9609,287.5,182.9609,277.5,186.9609,281.5,182.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53.5" x2="283.5" y1="182.9609" y2="182.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="113" x="60.5" y="177.895">Status Command</text><polygon fill="#A80036" points="765,208.0938,775,212.0938,765,216.0938,769,212.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="289.5" x2="771" y1="212.0938" y2="212.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="132" x="296.5" y="207.0278">Request sensor data</text><polygon fill="#A80036" points="479,237.2266,469,241.2266,479,245.2266,475,241.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="473" x2="776" y1="241.2266" y2="241.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="485" y="236.1606">Enqueue requested data</text><polygon fill="#A80036" points="456,266.3594,466,270.3594,456,274.3594,460,270.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="289.5" x2="462" y1="270.3594" y2="270.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="296.5" y="265.2935">Dequeue sensor data</text><polygon fill="#A80036" points="300.5,295.4922,290.5,299.4922,300.5,303.4922,296.5,299.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="294.5" x2="467" y1="299.4922" y2="299.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="78" x="306.5" y="294.4263">Sensor data</text><polygon fill="#A80036" points="64.5,324.625,54.5,328.625,64.5,332.625,60.5,328.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="58.5" x2="288.5" y1="328.625" y2="328.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="212" x="70.5" y="323.5591">Status Ack Command (with data)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="1042.5" y1="337.625" y2="337.625"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="18" y="347.8354">[Valve Command]</text><polygon fill="#A80036" points="277.5,368.5625,287.5,372.5625,277.5,376.5625,281.5,372.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="53.5" x2="283.5" y1="372.5625" y2="372.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="106" x="60.5" y="367.4966">Valve Command</text><polygon fill="#A80036" points="64.5,397.6953,54.5,401.6953,64.5,405.6953,60.5,401.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="58.5" x2="288.5" y1="401.6953" y2="401.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="70.5" y="396.6294">Valve Ack Command</text><polygon fill="#A80036" points="765,426.8281,775,430.8281,765,434.8281,769,430.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="289.5" x2="771" y1="430.8281" y2="430.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="174" x="296.5" y="425.7622">Command to actuate valve</text><polygon fill="#A80036" points="989.5,455.9609,999.5,459.9609,989.5,463.9609,993.5,459.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="777" x2="995.5" y1="459.9609" y2="459.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="784" y="454.895">Actuate valve</text><!--MD5=[8963d952e1deeb21944171ea0e768118]
@startuml CANha Sequence Diagram
participant "RCOM" as R
participant "Core 1 (RS485 Communication)" as C1
participant "Data Queue" as DQ
participant "Command Queue" as CQ
participant "Core 2 (Sensor/Actuation)" as C2
participant "Sensors" as S
participant "Valves" as V

loop Continuously read sensors
    C2 -> S: Read sensor data
    S - -> C2: Sensor data
end

alt Status Command
R -> C1: Status Command
C1 -> C2: Request sensor data
C2 -> DQ: Enqueue requested data
C1 -> DQ: Dequeue sensor data
DQ - -> C1: Sensor data
C1 -> R: Status Ack Command (with data)
else Valve Command
R -> C1: Valve Command
C1 -> R: Valve Ack Command
C1 -> C2: Command to actuate valve
C2 -> V: Actuate valve
end
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 WET 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.26+4-post-Ubuntu-1ubuntu122.04
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>